<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 命名空间 是必须的 -->
<mapper namespace="com.honeywen.credit.repository.command.CardCommandMapper">

    <insert id="save" parameterType="com.honeywen.credit.model.Card" keyProperty="id" useGeneratedKeys="true">
        INSERT INTO t_card (
        name,
        card_no,
        bank_id,
        card_type,
        card_limit,
        bill_day,
        repay_day_type,
        repay_day_num,
        status,
        create_by,
        create_at)
        VALUES
        (
        #{name},
        #{cardNo},
        #{bankId},
        #{cardType},
        #{cardLimit},
        #{billDay},
        #{repayDayType},
        #{repayDayNum},
        #{status},
        #{createBy},
        NOW()
        )

    </insert>

    <update id="update" parameterType="com.honeywen.credit.model.Card">

        UPDATE t_card
        <set>
            <if test="name != null">
                name = #{name},
            </if>

            <if test="cardLimit != null">
                card_limit = #{cardLimt},
            </if>
            <if test="billDay != null">
                bill_day = #{billDay},
            </if>
            <if test="repayDayType != null">
                repay_day_type = #{repayDayType},
            </if>
            <if test="repayDayNum != null">
                repay_day_num = #{repayDayNum},
            </if>
            <if test="updateBy != null">
                update_by = #{updateBy},
            </if>

            update_at = NOW()
        </set>

        WHERE id = #{id}
    </update>

    <update id="removeById" parameterType="java.lang.Integer">
        UPDATE t_card SET delete_flag = 1, update_at = NOW() WHERE id = #{id}
    </update>
</mapper>